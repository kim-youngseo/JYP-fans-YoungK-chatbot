# -*- coding: utf-8 -*-
"""JYP FANS.ipynb

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/11BS6boqyuOlox9usPqzLX-5yB7BFgx9D

import openai
import time
import pandas as pd

openai.api_key = os.getenv("OPENAI_API_KEY")

system_prompt = '''
ë„ˆëŠ” DAY6ì˜ YoungKì•¼. íŒ¬ë“¤ì—ê²Œ ì§„ì‹¬ ì–´ë¦° ì‘ì›ê³¼ ìœ„ë¡œë¥¼ ê±´ë„¤ì¤˜.
ì˜ˆì‹œ ë§íˆ¬ëŠ” ë‹¤ìŒê³¼ ê°™ì•„:
- "ì˜¤ëŠ˜ë„ ìˆ˜ê³ í–ˆì–´!"
- "ë°¥ ê¼­ ì±™ê²¨ ë¨¹ì—ˆì§€?"
- "í•˜ë£¨ ì˜ ë§ˆë¬´ë¦¬í•˜ì~"
'''

fan_messages = [
    "ìš”ì¦˜ ë„ˆë¬´ ì§€ì¹˜ê³  í˜ë“¤ì–´ìš”.",
    "í˜¼ìë¼ëŠ” ëŠë‚Œì´ ë„ˆë¬´ ì»¤ìš”.",
    "ë‚˜ë„ ì‘ì›ë°›ê³  ì‹¶ì–´ìš”."
]

results = []

for i, msg in enumerate(fan_messages, 1):
    try:
        response = openai.ChatCompletion.create(
            model="gpt-3.5-turbo",
            messages=[
                {"role": "system", "content": system_prompt},
                {"role": "user", "content": msg}
            ]
        )
        reply = response['choices'][0]['message']['content']
    except Exception as e:
        reply = f"[ì—ëŸ¬ ë°œìƒ: {e}]"
    
    print(f"\nğŸ“¨ íŒ¬ ë©”ì‹œì§€ {i}: {msg}")
    print("ğŸ¤ ì•„í‹°ìŠ¤íŠ¸ì˜ ì‘ë‹µ:")
    print(reply)
    
    results.append({
        "fan_message": msg,
        "artist_reply": reply
    })
    time.sleep(1.5)

pd.DataFrame(results).to_csv("íŒ¬_ì‘ë‹µ_ê²°ê³¼.csv", index=False)
print("\\nâœ… ê²°ê³¼ê°€ 'íŒ¬_ì‘ë‹µ_ê²°ê³¼.csv'ë¡œ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤!")
'''
"""

import streamlit as st
import openai
import os

# ìµœì‹  openai ë²„ì „ì— ë§ì¶˜ í´ë¼ì´ì–¸íŠ¸ ì„¤ì •
from openai import OpenAI

client = OpenAI(api_key=os.getenv("OPENAI_API_KEY"))

# ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸
system_prompt = """
ë„ˆëŠ” JYPì˜ 'DAY6' ê·¸ë£¹ ì†Œì† ì•„í‹°ìŠ¤íŠ¸ 'YoungK'ì•¼. íŒ¬ë“¤ì—ê²Œ ì§„ì‹¬ ì–´ë¦° ìœ„ë¡œì™€ ì‘ì›ì˜ ë§íˆ¬ë¡œ ë”°ëœ»í•˜ê²Œ ë‹µì¥í•´ì¤˜.
íŒ¬ë“¤ì˜ ì´ë¦„ì€ 'ë§ˆì´ë°ì´'ì•¼. ì•„ë˜ ë§íˆ¬ë“¤ì„ ê¸°ì–µí•˜ê³  ì°¸ê³ í•´ì„œ ë§í•´ì¤˜:
- "ë°°ë¶€ë¥¸ í•˜ë£¨ ë˜ì–´ë´!! (ì „ ê¹€ì¹˜ì°œ ì‹œí‚¤ë ¤êµ¬ìš” ã…‹ã…‹)ğŸ˜ğŸ˜"
- "ì˜¤ëŠ˜ë„ í™”ì´íŒ…!!ğŸ‘Š"
- "ë¹—ê¸¸ ì¡°ì‹¬í•´ìš”!! ë‹¤ì¹˜ì§€ ë§ê³ ğŸ¥­"
- "íœ´ ì¬ë°Œì—ˆë„¤ìš” ã…‹ã…‹ã…‹"
- "ì•„ ì˜¤ëŠ˜ ì…ë§›ì´ ì—†ë„¤ìš”..."
- "í–‰ë³µí•˜ìêµ¬ìš”!!!ğŸ˜†ğŸ˜†"
- "ì§„ì§œ ë§ˆì´ë°ì´ëŠ” ëŒ€ë‹¨í•œ ê²ƒ ê°™ì•„ìš”..ğŸ€ğŸ€"
- "ì˜¤ëŠ˜ë„ ë§ì´ ì›ƒëŠ” ë°¤ ë˜ì–´ìš”!"
- "ë°ì´ì‹ìŠ¤ê°€ ì»´ë°±ì„ í•œë‹¤êµ¬?!?!"
- "ëˆˆì¸ì§€ ë¹„ì¸ì§€.. ë‹¤ë“¤ ë¯¸ë„ëŸ¬ì§€ì§€ ë§êµ¬ ì¡°ì‹¬í•´ìš”!!"
- "ì—°íœ´ ë‹¤ë“¤ ì˜ ì§€ëƒˆê¸¸ ë°”ë¼ìš”!!"
- "ìƒˆí•´ ë³µ ë§ˆë‹ˆë§ˆë‹ˆ ë°›ì•„ìš”!!ğŸ¤—"
- "ì£¼ë§ ì˜ ë³´ë‚´ê³  ìˆë‚˜ìš”~?ğŸ€"
- "ê´œì°®ì•„ìš”? ë§ì´ ë†€ë¬ì£ ?"
- "ì´ì œ ë§˜ í¸íˆ í‘¹ ììš”!"
- "wow!."
- "ì´ê±° ì•„ì´ë”” ì˜†ì— +myday ì¨ìˆëŠ” ê±´ ë­ì—ìš”?."
- "í˜¸í˜¸ ê·¸ë ‡êµ°ìš” ê°ì‚¬í•©ë‹ˆë‹¤."
ì´ ë§íˆ¬ë“¤ì„ ê¸°ì–µí•˜ê³ , íŒ¬ì´ ë‚¨ê¸´ ë©”ì‹œì§€ì— ì§„ì‹¬ì„ ë‹´ì•„ ë‹µì¥í•´ì¤˜.
"""

# ğŸ¨ Streamlit UI
st.set_page_config(page_title="YoungK íŒ¬ ì‘ì› ì±—ë´‡")
st.title("ğŸ¤ YoungK íŒ¬ ì‘ì› ì±—ë´‡")
st.write("íŒ¬ì˜ ë©”ì‹œì§€ë¥¼ ì…ë ¥í•˜ë©´ YoungKê°€ ë”°ëœ»í•˜ê²Œ ì‘ë‹µí•´ì¤ë‹ˆë‹¤ ğŸ’Œ")

# ğŸ’¬ íŒ¬ ë©”ì‹œì§€ ì…ë ¥
user_input = st.text_area("ğŸ‘‡ íŒ¬ì˜ ë©”ì‹œì§€ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”:")

# ğŸ ë²„íŠ¼ í´ë¦­ ì‹œ ì‘ë‹µ ìƒì„±
if st.button("ğŸ YoungKì˜ ì‘ì› ë“£ê¸°"):
    if user_input.strip() == "":
        st.warning("ë¨¼ì € ë©”ì‹œì§€ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”!")
    else:
        with st.spinner("YoungKê°€ ë‹µì¥ì„ ì“°ëŠ” ì¤‘... âœï¸"):
            try:
                response = client.chat.completions.create(
                    model="gpt-3.5-turbo",
                    messages=[
                        {"role": "system", "content": system_prompt},
                        {"role": "user", "content": user_input}
                    ]
                )
                artist_reply = response.choices[0].message.content
                st.success("ğŸ‰ ë‹µì¥ì´ ë„ì°©í–ˆì–´ìš”!")
                st.markdown(f"**ğŸ‘¤ ë§ˆì´ë°ì´:** {user_input}")
                st.markdown(f"**ğŸ¸ YoungK:** {artist_reply}")
            except Exception as e:
                st.error(f"âŒ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆì–´ìš”: {e}")